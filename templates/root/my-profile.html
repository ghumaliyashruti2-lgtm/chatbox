{% extends "root/root.html" %}
{% load static %}
{% load tz %}

{% block title %}My Profile | ElixirTechne{% endblock %}

{% block right_content %}

<link rel="stylesheet" href="{% static 'css/my-profile.css'%}">

<div class="chat-inner-card my-profile-card">

    <div class="profile-container">
        <!-- Gradient Banner -->
        <div class="profile-header-bg">
             <div class="back-btn mobile-only">
                <a href=" {% url 'profiles:profile' %}" style="text-decoration:none; color:white;">
                    <i class="fa fa-arrow-left"></i>
                </a>
            </div>
        </div>

        <!-- User Info -->
        <div class="profile-top-section">
            <div class="profile-user">

                <img class="profile-img"
                    src="{% if profile.profile_picture %}{{ profile.profile_picture.url }}{% else %}{% static '/default/user_img.png' %}{% endif %}"
                    alt="Profile">

                <div>
                    <h3 style="margin-top:30px;">{{ user.get_full_name|default:user.email }}</h3>
                    <p style="margin-top:0px; color:#777;">{{ user.email }}</p>
                </div>
                
            </div>
            <div style="display: flex; gap: 20px; margin-top: 40px;" class="profile-action">
        
                <div class="circle-btn" onclick="openeditPopup('{% url 'profiles:edit-profile' %}')">
                    <i class="fas fa-pen" styel="color:white;"></i>
                </div>

                <div class="circle-btn" onclick="opendeletePopup('{% url 'profiles:delete-profile' %}')">
                    <i class="fas fa-trash" style="color:white;"> </i>
                </div>
            </div>

        </div>
        
        <!-- Form Section -->
        <form method="POST">

                {% csrf_token %}

                <div class="form-grid">
                    <div>
                        <label>Firstname</label>
                        <input class="input-tag" type="text" name="firstname" value="{{ request.user.first_name }}">
                    </div>

                    <div>
                        <label>Lastname</label>
                        <input class="input-tag" type="text" name="lastname" value="{{ request.user.last_name }}">
                    </div>


                    <div>
                        <label>Gender</label>
                        <select class="input-tag" name="gender">
                            <option value="">Select Gender</option>
                            <option value="Female" {% if profile.gender == "Female" %}selected{% endif %}>Female</option>
                            <option value="Male" {% if profile.gender == "Male" %}selected{% endif %}>Male</option>
                            <option value="Other" {% if profile.gender == "Other" %}selected{% endif %}>Other</option>
                        </select>
                    </div>

                    <div>
                        <label>Mobile</label>
                        <input class="input-tag"  type="text" name="mobile" id="mobile" 
                            value="{{ profile.mobile }}" 
                            maxlength="10"
                            placeholder="Enter your mobile number">
                    </div>

                </div>

                <div class="setting-save-btn">
                    <button type="submit" class="save-btn">Save</button>
                </div>
            </form>

    </div>
</div>




<div class="popup-overlay" id="popupOverlay">
    <div class="popup-wrapper">
        <iframe id="popupFrame">
        </iframe>
    </div>
</div>


{% endblock %}
